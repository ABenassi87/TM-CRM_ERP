<div>
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="fa fa-home"></i>
                <a ui-sref="home">@(Home)</a>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <span>@(compta:MenuFinancial)</span>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <span>@(orders:SuppliersInvoices)</span>
            </li>
        </ul>
        <div class="page-toolbar">
            <div class="btn-group pull-right">
                <button class="btn yellow-crusta dropdown-toggle uppercase" data-toggle="dropdown"><i class="fa fa-share"></i> @(Tools) <i class="fa fa-angle-down"></i>
                            </button>
                <ul class="dropdown-menu pull-right">
                    <li>
                        <a href="#" onclick="javascript:window.print();"><i class="fa fa-print"></i> 
                                            @(PrintList) </a>
                    </li>
                    <li>
                        <a ng-show="login.rights.bill.read" ng-click="openUrl('/erp/api/bill/pdf/', 'id')" target="_blank">
                            <i class="fa fa-file-pdf-o"></i> @(BuildPDF)
                        </a>
                    </li>
                    <li>
                        <a href="#" ng-click="changeStatus('NOT_PAID','id')"><i class="fa fa-thumbs-o-up"></i>
                                            @(Validate) </a>
                    </li>
                    <li>
                        <a href="#" ng-show="login.rights.bill.validate" data-ng-click="exportAccounting()">
                            <i class="fa fa-mail-forward"></i> @(orders:SendAccounting)
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="portlet light portlet-form bordered">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-money"></i>
                <span class="caption-subject dark bold uppercase"> @(orders:ListBillsSuppliers)</span>
            </div>
            <div class="actions">
                <button class="btn blue" ui-sref="billsupplier.create">@(Add) <i class="fa fa-plus"></i></button>
                <button title="@(Refresh)" class="btn btn-icon-only btn-default" ng-click="find()"><i class="fa fa-refresh"></i></button>
            </div>
        </div>
        <div class="tools">
        </div>
        <div class="portlet-body">
            <div class="table-toolbar">
                <div class="row hidden-print">
                    <div class="form-group form-md-line-input">

                        <div class="col-md-3">
                            <div class="form-group form-md-line-input ">
                                <select ng-model="status_id" ng-change="find();" id="Status" ng-options="s.id as s.label for s in dict.fk_bill_status.values" class="form-control"></select>
                                <label for="Status">@(Status)</label>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group form-md-line-input ">
                                <select ng-show="login.multiEntities" ng-model="entity" ng-change="setEntity(entity); find();" ng-options="s.id as s.name for s in entityList" class="form-control"></select>
                                <label for="Status">@(companies:Entity)</label>
                            </div>
                        </div>

                        <!--<label class="col-md-2 control-label text-right" for="form_control_1">@(orders:FilterbyStatus)</label>

                        <div class="col-md-3">
                            <select ng-model="status_id" ng-change="find();" ng-options="s.id as s.label for s in dict.fk_delivery_status.values" class="form-control">
                                <option value="">-- @(All) --</option>
                            </select>
                            <div class="form-control-focus"> </div>
                        </div>

                        <label class="col-md-2 control-label text-right" for="form_control_1">@(orders:FilterbyEntity)</label>

                        <div class="col-md-3">
                            <select ng-show="login.multiEntities" ng-model="entity" ng-change="setEntity(entity);
                                    find();" ng-options="s.id as s.name for s in entityList" class="form-control">
                            </select>
                            <div class="form-control-focus"> </div>
                        </div>
                        <div class="col-md-1"></div>-->

                    </div>
                </div>
                <table-pagination ng-model="page"></table-pagination>
                <div class="no-footer table-responsive">
                    <table class="table table-striped table-hover table-condensed no-footer">
                        <colgroup>
                            <col width="42px">
                            <col width="12%">
                            <col width="14%">
                            <col width="8%">
                            <col width="10%">
                            <col width="12%">
                            <col width="12%">
                            <col width="8%">
                            <col width="8%">
                            <col width="8%">
                            <col width="8%">
                            <col width="70px">
                            <col width="10%">
                            <col width="10%">
                        </colgroup>
                        <thead>
                            <tr role="row" class="heading">
                                <th class="text-center">
                                    <input uniform type="checkbox" ng-model="checkAll" ng-checked="checkAll" ng-click="checkedAll()" />
                                </th>
                                <th table-sort='ID' ng-model="sort" name="@(Ref)"></th>
                                <th table-sort='supplier.fullName' ng-model="sort" name="@(companies:Company)"></th>
                                <th>@(RefCustomer)</th>
                                <th table-sort='salesPerson.fullName' ng-model="sort" name="@(commercial:Commercial)"></th>
                                <th table-sort='datec' ng-model="sort" name="@(orders:DateInvoice)"></th>
                                <th table-sort='dater' ng-model="sort" name="@(orders:DateEcheance)"></th>
                                <th table-sort='total_ht' ng-model="sort" name="@(TotalHT)"></th>
                                <th table-sort='total_ttc' ng-model="sort" name="@(TotalTTC)"></th>
                                <th table-sort='total_paid' ng-model="sort" name="@(AmountPaid)"></th>
                                <th table-sort='total_to_paid' ng-model="sort" name="@(AmountToPaid)"></th>
                                <th>@(Status)</th>
                                <th>@(companies:Entity)</th>
                                <th>@(DateCreation)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="line in orders" ng-class="{'bg-grey-silver':line.exported}">
                                <td class="text-center"><input uniform type="checkbox" ng-model="grid[line._id]" ng-checked="grid[line._id]" /></td>
                                <td ui-sref="bill.show({id:line._id})"><a class=" with-tooltip " ui-sref="bill.show({id:line._id}) "><i class="fa fa-shopping-cart "></i> {{line.ref}}</a></td>
                                <td>
                                    <a ng-if="line.supplier._id" class="with-tooltip " ui-sref="societe.show({id:line.supplier._id}) "><i class="fa fa-institution "></i> {{line.supplier.fullName}}</a>
                                    <span ng-show="!line.supplier._id" class="with-tooltip editable editable-empty "> @(Empty)</span>
                                </td>
                                <td ui-sref="bill.show({id:line._id})">{{line.ref_client}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.salesPerson.fullName}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.datec| date:'dd/MM/yyyy'}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.dater| date:'dd/MM/yyyy'}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.total_ht| currency}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.total_ttc| currency}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.total_paid| currency}}</td>
                                <td ui-sref="bill.show({id:line._id})">{{line.total_to_paid | currency}}</td>
                                <td ui-sref="bill.show({id:line._id})">
                                    <span class="label label-sm {{line.Status.css}} "> {{line.Status.name}}</span>
                                </td>
                                <td ui-sref="bill.show({id:line._id})">{{line.entity}} </td>
                                <td ui-sref="bill.show({id:line._id})">{{line.datec| date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <table-pagination ng-model="page"></table-pagination>
            </div>
        </div>
    </div>
</div>