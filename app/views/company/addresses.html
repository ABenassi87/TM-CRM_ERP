<div class="portlet light portlet-form bordered">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-user"></i>
            <span class="caption-subject dark bold uppercase"> @(ContactsAddressesForCompany)</span>
            <span class="caption-helper"> - @(companies:CardCompany)</span>
        </div>
    </div>

    <div class="portlet-body">
        <tabset class="tabbable-line tabbable-full-width">
            <!--
            Contact
            -->
            <tab heading="@(Contacts)">
                <!-- <div class="portlet-body" ng-include="'/templates/contact/list.html'" ng-controller="ContactController" onload="loadDatatable({'societe': $stateParams.id})">
                </div>-->
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="btn-group pull-right">
                            <button class="btn blue" data-ng-click="addContact()">@(Add) <i class="fa fa-plus"></i></button>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-if="societe.type == 'Company'" ng-repeat="name in societe.name">
                        <div class="portlet light bordered">
                            <div class="form-group form-md-line-input">
                                {{societe.name.civilite}} {{societe.name.last}} {{societe.name.first}}
                            </div>

                            <div>
                                {{societe.emails.email || '--'}}
                            </div>

                            <div>
                                {{societe.phones.phone}}
                            </div>

                            <div class="row">
                                <div class="col-md-offset-5 col-md-6">
                                    <button class="btn btn-icon-only red" confirmed-click="delete()">
                                    <i class="fa fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <script type="text/ng-template" id="addContact.html">
                    <div class="modal-header">
                        <h3 class="no-margin-bottom center"><i class="fa fa-user"></i> @(companies:AddContact)</h3>
                    </div>
                    <div class="modal-body">
                        <div class="col-md-12">
                            <div class="form-horizontal">
                                <div id="contactList" class="dataTables_filter"><label>@(Search) @(companies:Contact) :  <input type="text"  ng-model="search" ng-change="find()" class="form-control input-small input-sm input-inline" placeholder="" ></label></div>
                                <button class="btn blue center right" data-ng-click="createContact()">@(Create) @(companies:Contact)</button>

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </script>
            </tab>
            <!--
            Shipping Address
            -->
            <tab>
                <tab-heading>
                    @(companies:DeliveriesAddress) <span ng-if="societe.addresses.length" class="badge badge-info ng-binding ng-scope">{{societe.addresses.length}}</span>
                </tab-heading>
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="btn-group pull-right">
                            <button class="btn blue" data-ng-click="editAddress()">@(Add) <i class="fa fa-plus"></i></button>
                        </div>
                    </div>
                </div>
                <script type="text/ng-template" id="addModalAddress.html">
                    <div class="modal-header">
                        <h3 class="no-margin-bottom"><i class="fa fa-truck"></i> Edition d'une adresse de livraison</h3>
                    </div>
                    <div class="modal-body">
                        <div class="col-md-12">
                            <div class="form-horizontal">

                                <address ng-model="address"></address>

                                <div class="form-group form-md-line-input">
                                    <label class="col-md-3 control-label">@(Status)</label>
                                    <div class="col-md-9">
                                        <select class="form-control" ng-model="address.Status" ng-options="c.id as c.label for c in dict.fk_user_status.values">
                                                    </select>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">

                        <button type="button" ng-click="ok()" class="btn btn-circle btn-success">@(Save)</button>
                    </div>
                </script>

                <div class="dataTables_wrapper table-responsive">
                    <div class="col-md-12">
                        <table class="table dataTable table-hover">
                            <thead>
                                <tr role="row" class="heading">
                                    <th width="2%">
                                        @(Default)
                                    </th>
                                    <th>@(Name)</th>
                                    <th>@(Address)</th>
                                    <th>@(Zip)</th>
                                    <th>@(Town)</th>
                                    <th>@(Status)</th>
                                    <th>@(Action)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="address in societe.shippingAddress">
                                    <td><input uniform ng-model="_idAddress" type="checkbox" name="id[]" ng-checked="societe.deliveryAddressId == address.id" ng-click="setDefaultDelivery(address.id)" /></td>
                                    <td> {{address.name}} </td>
                                    <td><pre>{{ address.street ||  "Non defini" }}</pre></td>
                                    <td> {{address.zip}} </td>
                                    <td> {{address.city}} </td>
                                    <td>
                                        <span class="label label-sm {{address.status.css}}"> {{address.status.name}} </span>
                                    </td>
                                    <td style="white-space: nowrap">
                                        <!-- form -->
                                        <div class="btn-group buttons" ng-if="$index != 0">
                                            <button type="button" class="btn btn-xs btn-primary" ng-click="editAddress(address)"><i class="fa fa-pencil"></i></button>
                                            <button type="button" class="btn btn-xs btn-danger" confirmed-click="removeAddress($index)" ng-confirm-click="Supprimer l'adresse ?"><i class="fa fa-trash-o"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </tab>
        </tabset>
    </div>
</div>